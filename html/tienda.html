<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tienda Dinámica - Marbula One</title>
  <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
  <link rel="stylesheet" href="../css/styles.css">
  <script>
    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
      ev.preventDefault();

      var data = ev.dataTransfer.getData("text");
      var producto = document.getElementById(data).cloneNode(true);

      producto.removeAttribute("id");  // Evita duplicar IDs
      producto.style.cursor = "default"; // No se vuelve a arrastrar desde el carrito

      var carrito = document.getElementById("carrito");

      var item = document.createElement("div");
      item.classList.add("producto-carrito");
      item.appendChild(producto);

      carrito.appendChild(item);
    }
  </script>
  <style>
    .articulos, .carrito-flotante {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .producto {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
      border-radius: 10px;
      width: 200px;
      cursor: grab;
      background: #fff;
    }

    .producto img {
      width: 100px;
      height: auto;
    }

    .carrito-flotante {
      border: 2px dashed #000;
      padding: 20px;
      min-height: 200px;
      width: 300px;
      text-align: center;
      background: #f8f8f8;
    }
  </style>
</head>
<body>
<header>
  <a href="../index.html">
    <img src="../images/logo.webp" alt="Logo Marbula One" class="logo">
  </a>
  <button class="menu-hamburguesa" aria-label="Abrir menú" aria-expanded="false">
    &#9776;
  </button>
  <ul class="menu-list">
    <li class="dropdown">
      <a href="#">ACERCA DE</a>
      <ul class="submenu">
        <li><a href="nosotros.html">NOSOTROS</a></li>
        <li><a href="normativa.html">NORMATIVA</a></li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="#">ACTIVIDADES</a>
      <ul class="submenu">
        <li><a href="clasificacion.html">CLASIFICACIÓN</a></li>
        <li><a href="campeones.html">CAMPEONES</a></li>
        <li><a href="escuderias.html">FORMACIÓN</a></li>
        <li><a href="calendario.html">CALENDARIO</a></li>
      </ul>
    </li>
    <li><a href="galeria.html">GALERÍA</a></li>
    <li><a href="tienda.html">TIENDA</a></li>
    <li><a href="contacto.html">CONTACTO</a></li>
  </ul>
</header>
<div class="center">
  <h1>Tienda - Marbula One</h1>
  <div class="articulos">
    <div class="producto" id="producto1" draggable="true" ondragstart="drag(event)">
      <img src="../images/camiseta.jpg" alt="Camiseta Oficial Marbula One" width="150">
      <h3>Camiseta Oficial Marbula One</h3>
      <p>La camiseta oficial de Marbula One. Comodidad y estilo con el logo de Marbula One.</p>
      <p><strong>Precio: $19.99</strong></p>
    </div>

    <div class="producto" id="producto2" draggable="true" ondragstart="drag(event)">
      <img src="../images/gorra.jpg" alt="Gorra Marbula One" width="150">
      <h3>Gorra Marbula One</h3>
      <p>Gorra con el logo de Marbula One, perfecta para los fans más apasionados.</p>
      <p><strong>Precio: $15.99</strong></p>
    </div>

    <div class="producto" id="producto3" draggable="true" ondragstart="drag(event)">
      <img src="../images/juguete_canicas.jpg" alt="Juguete de Canicas Marbula One" width="150">
      <h3>Juguete de Canicas Marbula One</h3>
      <p>Recrea las carreras de Marbula One con este divertido juguete de canicas.</p>
      <p><strong>Precio: $29.99</strong></p>
    </div>

    <div class="producto" id="producto4" draggable="true" ondragstart="drag(event)">
      <img src="../images/poster_marbula.jpg" alt="Póster Marbula One" width="150">
      <h3>Póster Marbula One</h3>
      <p>Póster de alta calidad con los mejores momentos de Marbula One.</p>
      <p><strong>Precio: $9.99</strong></p>
    </div>

    <div class="producto" id="producto5" draggable="true" ondragstart="drag(event)">
      <img src="../images/mochila.jpg" alt="Mochila Marbula One" width="150">
      <h3>Mochila Marbula One</h3>
      <p>Mochila resistente con el logo de Marbula One, ideal para llevar tus pertenencias a las carreras.</p>
      <p><strong>Precio: $34.99</strong></p>
    </div>

    <div class="producto" id="producto6" draggable="true" ondragstart="drag(event)">
      <img src="../images/taza.jpg" alt="Taza Oficial Marbula One" width="150">
      <h3>Taza Oficial Marbula One</h3>
      <p>Comienza tu día con una taza de café en la taza oficial de Marbula One.</p>
      <p><strong>Precio: $7.99</strong></p>
    </div>

    <div class="producto" id="producto7" draggable="true" ondragstart="drag(event)">
      <img src="../images/bandera.jpg" alt="Bandera Oficial Marbula One" width="150">
      <h3>Bandera Oficial Marbula One</h3>
      <p>Bandera oficial de Marbula One para mostrar tu apoyo a tu equipo favorito.</p>
      <p><strong>Precio: $12.99</strong></p>
    </div>

    <div class="producto" id="producto8" draggable="true" ondragstart="drag(event)">
      <img src="../images/pegatinas.jpg" alt="Set de Pegatinas Marbula One" width="150">
      <h3>Set de Pegatinas Marbula One</h3>
      <p>Personaliza tu material con este set de pegatinas exclusivas de Marbula One.</p>
      <p><strong>Precio: $4.99</strong></p>
    </div>
  </div>

  <aside>
    <div class="carrito-flotante" id="carrito" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h2>Carrito de Compras</h2>
      <p>Arrastra los productos aquí</p>
      <table>
        <thead>
        <tr>
          <th>Producto</th>
          <th>Cant.</th>
          <th>Total</th>
          <th>Acción</th>
        </tr>
        </thead>
        <tbody id="carrito-body-flotante"></tbody>
      </table>
      <p id="total-carrito-flotante">Total: €0.00</p>
      <div class="acciones">
        <button id="comprar-flotante">Proceder al Pago</button>
      </div>
    </div>
  </aside>
</div>
<footer>
  <div class="sponsors">
    <h2>Nuestros Sponsors</h2>
    <div class="sponsor-logos">
      <a href="https://www.adidas.es/" target="_blank">
        <img src="../images/adidas.png" alt="Logo Adidas">
      </a>
      <a href="https://www.iberia.com/" target="_blank">
        <img src="../images/iberia.svg" alt="Logo Iberia">
      </a>
    </div>
  </div>
  <div class="bottom">
    <div class="contacto">
      <h2>Contacto</h2>
      <p>Síguenos en nuestras redes sociales:</p>
      <div class="redes-sociales">
        <a href="https://www.instagram.com/" target="_blank">
          <img src="../images/instagram.png" alt="Logo de Instagram">
        </a>
        <a href="https://www.facebook.com/" target="_blank">
          <img src="../images/facebook.svg" alt="Logo de Facebook">
        </a>
        <a href="https://twitter.com/" target="_blank">
          <img src="../images/x.png" alt="Logo de Twitter">
        </a>
        <a href="https://www.youtube.com/" target="_blank">
          <img src="../images/youtube.png" alt="Logo de YouTube">
        </a>
      </div>
    </div>
    <div id="map" style="width:50%;height:300px"></div>
  </div>
</footer>

</body>
</html>

<script>
  function initMap() {
    // Comprueba si la geolocalización está disponible
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
              function (position) {
                // Obtén las coordenadas del usuario
                var userLat = position.coords.latitude;
                var userLng = position.coords.longitude;

                // Opciones del mapa
                var mapOptions = {
                  center: new google.maps.LatLng(userLat, userLng),
                  zoom: 16,
                  mapTypeId: google.maps.MapTypeId.TERRAIN
                };

                // Crea el mapa
                var map = new google.maps.Map(document.getElementById("map"), mapOptions);

                // Agrega un marcador en la posición del usuario
                new google.maps.Marker({
                  position: { lat: userLat, lng: userLng },
                  map: map,
                  title: "¡Estás aquí!"
                });
              },
              function (error) {
                // Manejo de errores
                console.error("Error al obtener la ubicación: ", error.message);
                alert("No se pudo obtener tu ubicación.");
              }
      );
    } else {
      alert("La geolocalización no es compatible con tu navegador.");
    }
  }
</script>

<!-- Carga la API de Google Maps con tu clave y llama a la función initMap -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7iCzhZT-L4FlkA_0VZ5qqkJVtQ743vB4&callback=initMap" async defer></script>
