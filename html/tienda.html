<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Dinámica - Marbula One</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <!-- jQuery -->
    <script src="../lib/jquery-3.6.0.js"></script>
    <script src="../js/plugins.js"></script>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- css general -->
    <link rel="stylesheet" href="../css/styles.css">
    <!-- tienda -->
    <link rel="stylesheet" href="../css/tienda.css">
    <script type="module" src="../js/tienda.js"></script>
</head>
<body>
<header>
    <a href="../index.html">
        <img src="../images/logo.webp" alt="Logo Marbula One" class="logo">
    </a>
    <button class="menu-hamburguesa" aria-label="Abrir menú" aria-expanded="false">
        &#9776;
    </button>
    <ul class="menu-list">
        <li class="dropdown">
            <a href="#">Acerca de</a>
            <ul class="submenu">
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="normativa.html">Normativa</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="#">Actividades</a>
            <ul class="submenu">
                <li><a href="clasificacion.html">Clasificación</a></li>
                <li><a href="campeones.html">Campeones</a></li>
                <li><a href="escuderias.html">Escuderías</a></li>
                <li><a href="calendario.html">Calendario</a></li>
            </ul>
        </li>
        <li><a href="galeria.html">Galería</a></li>
        <li><a href="tienda.html">Tienda</a></li>
        <li><a href="contacto.html">Contacto</a></li>
    </ul>
</header>
<div class="center">

    <div class="rectangulo">
        <h1 class="titulo-rectangulo">Tienda</h1>
    </div>
    <div class="tienda-layout">
        <div class="elementos_listables">
            <!-- Aquí los productos se cargarán dinámicamente desde Firebase -->
        </div>

        <div class="carrito-flotante" id="carrito" ondrop="drop(event)" ondragover="allowDrop(event)">
        <h2>Carrito</h2>
            <p>Arrastra los productos aquí</p>
            <table>
                <thead>
                <tr>
                    <th>Producto</th>
                    <th>Cant.</th>
                    <th>Total</th>
                    <th>Acción</th>
                </tr>
                </thead>
                <tbody id="carrito-body-flotante"></tbody>
            </table>
            <p id="total-carrito-flotante">Total: €0.00</p>
            <div class="acciones">
                <button id="comprar-flotante">Proceder al Pago</button>
            </div>
        </div>
    </div>

</div>
<footer>
    <div class="sponsors">
        <h2>Nuestros Sponsors</h2>
        <div class="sponsor-logos">
            <a href="https://www.adidas.es/" target="_blank">
                <img src="../images/adidas.png" alt="Logo Adidas">
            </a>
            <a href="https://www.iberia.com/" target="_blank">
                <img src="../images/iberia.svg" alt="Logo Iberia">
            </a>
        </div>
    </div>
    <div class="bottom">
        <div class="contacto">
            <h2>Contacto</h2>
            <p>Síguenos en nuestras redes sociales:</p>
            <div class="redes-sociales">
                <a href="https://www.instagram.com/" target="_blank">
                    <img src="../images/instagram.png" alt="Logo de Instagram">
                </a>
                <a href="https://www.facebook.com/" target="_blank">
                    <img src="../images/facebook.svg" alt="Logo de Facebook">
                </a>
                <a href="https://twitter.com/" target="_blank">
                    <img src="../images/x.png" alt="Logo de Twitter">
                </a>
                <a href="https://www.youtube.com/" target="_blank">
                    <img src="../images/youtube.png" alt="Logo de YouTube">
                </a>
            </div>
        </div>
        <div id="map" style="width:50%;height:300px"></div>
    </div>
</footer>

</body>
</html>

<script>
    function initMap() {
        // Comprueba si la geolocalización está disponible
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function (position) {
                    // Obtén las coordenadas del usuario
                    var userLat = position.coords.latitude;
                    var userLng = position.coords.longitude;

                    // Opciones del mapa
                    var mapOptions = {
                        center: new google.maps.LatLng(userLat, userLng),
                        zoom: 16,
                        mapTypeId: google.maps.MapTypeId.TERRAIN
                    };

                    // Crea el mapa
                    var map = new google.maps.Map(document.getElementById("map"), mapOptions);

                    // Agrega un marcador en la posición del usuario
                    new google.maps.Marker({
                        position: {lat: userLat, lng: userLng},
                        map: map,
                        title: "¡Estás aquí!"
                    });
                },
                function (error) {
                    // Manejo de errores
                    console.error("Error al obtener la ubicación: ", error.message);
                    alert("No se pudo obtener tu ubicación.");
                }
            );
        } else {
            alert("La geolocalización no es compatible con tu navegador.");
        }
    }
</script>

<!-- Carga la API de Google Maps con tu clave y llama a la función initMap -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7iCzhZT-L4FlkA_0VZ5qqkJVtQ743vB4&callback=initMap" async
        defer></script>
