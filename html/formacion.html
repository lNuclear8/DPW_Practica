<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Marbula One</title>
  <link rel="stylesheet" href="../css/styles.css">
  <script src="../js/functions.js" defer></script>
  <script src="../js/ajax.js" defer></script>
  <script src="../js/cookies.js" defer></script>
  <script src="../js/jquery-3.6.0.js"></script>
  <!-- Carga la API de Google Maps con el callback a initMap -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7iCzhZT-L4FlkA_0VZ5qqkJVtQ743vB4&callback=initMap" async defer></script>
  <style>
    /* Estilo básico para validaciones y animaciones */
    .formulario {
      max-width: 600px;
      margin: auto;
      font-family: Arial, sans-serif;
    }
    input:invalid, select:invalid, textarea:invalid {
      border: 2px solid red;
      animation: shake 0.2s ease-in-out;
    }
    input:valid, select:valid, textarea:valid {
      border: 2px solid green;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25%, 75% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
    }
    summary-box {
      display: block;
      margin-top: 20px;
      padding: 10px;
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
<div id="header"></div>
<div class="center">
  <!-- Contadores de visitas usando localStorage y sessionStorage -->
  <div id="contador" style="margin: 20px; padding: 10px; border: 1px solid #ccc;">
    <!-- Aquí se mostrará el conteo de visitas -->
  </div>
  <div class="rectangulo">
    <img src="../images/rectangulo.png" alt="Rectangulo Azul" width="100%" height="100">
    <h1>FORMACIÓN</h1>
  </div>
  <div class="texto">
    <h2>Cómo construir una pista de canicas</h2>
    <p>Aquí tienes algunos consejos generales para hacer una pista de canicas que funcione bien:</p>

    <ul>
      <li><strong>Para niños:</strong> Primero, por favor, pide permiso a tus padres antes de comenzar a construir tu pista.</li>
      <li><strong>Busca un espacio:</strong> Tu dormitorio, ático, cuarto de hobbies, cobertizo, jardín, etc. Busca un lugar que sea lo suficientemente grande para construir la pista. No construyas pistas en lugares concurridos, como en medio de la sala de estar o la cocina. Para proyectos más pequeños, solo necesitarás una mesa para trabajar.</li>
      <li><strong>Busca materiales:</strong> Tubos, canalones, mangueras de aspiradoras, juguetes de pistas de carreras, K'nex, rieles de cortinas, timbres de bicicleta, campanas de puerta, gongs, campanillas, pantallas de lámparas, embudos, instrumentos musicales, papel, cartón, bloques de construcción, y mucho más. Ten cuidado al usar vidrio o porcelana, ya que pueden romperse si las canicas los golpean a gran velocidad. Al trabajar con papel o cartón, solo necesitas unas tijeras y pegamento o cinta adhesiva para construir la pista. Al trabajar con otros materiales, como madera o metales, necesitarás buenas herramientas para construir una pista estable.</li>
      <li><strong>Construye tu pista:</strong> Comienza desde abajo y luego ve construyendo hacia arriba, esto facilita el proceso. Asegúrate de que tu pista tenga suficiente inclinación para que la canica siga rodando sin atascarse.</li>
      <li><strong>Prueba tu pista:</strong> Coloca una canica varias veces en la pista mientras la construyes para probarla.</li>
    </ul>

    <h2>Cuando una canica se atasca:</h2>
    <ul>
      <li>Ajusta los soportes de la pista.</li>
      <li>Haz la pista más ancha si una canica se atasca entre los bordes de la pista y arregla las grietas entre las partes de la pista.</li>
      <li>Busca pequeños huecos entre las partes de la pista o revisa las uniones, arréglalos con cinta adhesiva o empuja las partes para que queden bien juntas.</li>
      <li>Haz la pista más resistente, refuerza las partes débiles de la pista, especialmente si estás usando papel o cartón.</li>
      <li>Revisa la pista por si hay suciedad o polvo y límpiala.</li>
    </ul>
  </div>

  <h2>Consideraciones de seguridad</h2>
  <ul>
    <li>Si estás trabajando con materiales pequeños como piezas de plástico o metal, asegúrate de que no sean peligrosos para los niños o mascotas. Mantén las piezas pequeñas fuera del alcance de los más pequeños.</li>
    <li>Siempre usa tijeras y herramientas de forma segura. Si estás usando herramientas como martillos o taladros, hazlo bajo la supervisión de un adulto.</li>
    <li>Evita que las canicas sean lanzadas hacia los ojos u otras partes del cuerpo. No permitas que los niños jueguen con las canicas de forma inapropiada.</li>
  </ul>

  <h2>Consejos para mejorar la velocidad de la canica</h2>
  <ul>
    <li>Para aumentar la velocidad de la canica, asegúrate de que la pista tenga una inclinación adecuada. Las pendientes más pronunciadas permiten que las canicas se deslicen más rápido.</li>
    <li>Usa materiales suaves y pulidos para las superficies de la pista. Esto reducirá la fricción y permitirá que las canicas se deslicen sin esfuerzo.</li>
    <li>Haz que las curvas sean lo más suaves posible. Las curvas bruscas pueden ralentizar la canica, así que procura usar transiciones suaves para evitar que la canica se detenga o frene.</li>
  </ul>

  <div class="formulario">
    <h2>Inscripción a la formación de canicas</h2>

    <form action="https://httpbin.org/post" method="post" target="_blank">
      <fieldset>
        <legend>Datos personales</legend>

        <!-- Nombre completo -->
        <label for="nombre">Nombre completo:</label>
        <input type="text" id="nombre" name="nombre" placeholder="Tu nombre completo" required><br><br>

        <!-- Correo electrónico -->
        <label for="email">Correo electrónico:</label>
        <input type="email" id="email" name="email" placeholder="tu@correo.com" required><br><br>

        <!-- Fecha de nacimiento -->
        <label for="fecha_nacimiento">Fecha de nacimiento:</label>
        <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required><br><br>

        <!-- Género -->
        <label for="genero">Género:</label>
        <select id="genero" name="genero" required>
          <option value="masculino">Masculino</option>
          <option value="femenino">Femenino</option>
          <option value="otro">Otro</option>
        </select><br><br>

        <!-- Teléfono -->
        <label for="telefono">Teléfono de contacto:</label>
        <input type="tel" id="telefono" name="telefono" placeholder="Ej. 123-456-7890" pattern="\d{3}[-]\d{3}[-]\d{4}" required><br><br>
      </fieldset>

      <fieldset>
        <legend>Información sobre la formación</legend>

        <!-- Elección de formación -->
        <label for="formacion">¿Qué formación te interesa?</label>
        <select id="formacion" name="formacion" required>
          <option value="introduccion">Introducción a la construcción de pistas de canicas</option>
          <option value="avanzada">Formación avanzada en técnicas de canicas</option>
          <option value="competicion">Curso de competición en carreras de canicas</option>
        </select><br><br>

        <!-- Fecha preferida -->
        <label for="fecha_preferida">Fecha preferida para comenzar:</label>
        <input type="date" id="fecha_preferida" name="fecha_preferida" required><br><br>

        <!-- Comentarios -->
        <label for="comentarios">Comentarios adicionales:</label><br>
        <textarea id="comentarios" name="comentarios" rows="4" cols="50" placeholder="Escribe aquí tus comentarios o preguntas"></textarea><br><br>

        <!-- Aceptación de términos -->
        <label for="terminos">
          <input type="checkbox" id="terminos" name="terminos" required> Acepto los <a href="#">términos y condiciones</a>
        </label><br><br>

        <!-- Botón de envío -->
        <button type="submit">Inscribirse</button>
      </fieldset>
    </form>
  </div>
</div>
<div id="footer"></div>
<script>
  class SummaryBox extends HTMLElement {
    connectedCallback() {
      this.innerHTML = `<p>Rellena el formulario y verás un resumen aquí.</p>`;
    }

    updateSummary(data) {
      this.innerHTML = `
        <h3>Resumen de tu inscripción:</h3>
        <p><strong>Nombre:</strong> ${data.nombre}</p>
        <p><strong>Email:</strong> ${data.email}</p>
        <p><strong>Fecha de nacimiento:</strong> ${data.fecha_nacimiento}</p>
        <p><strong>Género:</strong> ${data.genero}</p>
        <p><strong>Formación:</strong> ${data.formacion}</p>
        <p><strong>Comentarios:</strong> ${data.comentarios || 'Sin comentarios'}</p>
      `;
      this.speakSummary(data);
    }

    speakSummary(data) {
      const speech = new SpeechSynthesisUtterance(`
        Resumen de tu inscripción.
        Nombre: ${data.nombre}.
        Email: ${data.email}.
        Fecha de nacimiento: ${data.fecha_nacimiento}.
        Género: ${data.genero}.
        Formación seleccionada: ${data.formacion}.
        Comentarios: ${data.comentarios || 'Sin comentarios'}.
      `);
      speech.lang = 'es-ES';
      window.speechSynthesis.speak(speech);
    }
  }
  customElements.define('summary-box', SummaryBox);

  const form = document.getElementById('formulario');
  const resumenBox = document.getElementById('resumen');

  // Guardar datos en LocalStorage
  document.querySelectorAll('#formulario input, #formulario select, #formulario textarea').forEach(input => {
    input.addEventListener('input', () => {
      localStorage.setItem(input.id, input.value);
    });

    // Restaurar datos al cargar
    if (localStorage.getItem(input.id)) {
      input.value = localStorage.getItem(input.id);
    }
  });

  // Procesar el formulario
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    // Mostrar el resumen
    resumenBox.updateSummary(data);

    // Limpiar LocalStorage
    localStorage.clear();
  });
</script>
</body>
</html>